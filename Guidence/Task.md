
Koneksi String Ke POstgres:

    "DefaultConnection": "Host=127.0.0.1;Port=5432;Database=sfcore_siak;Username=postgres;Password=PasswordGua_123!";


### SCHEMA TABLE ON DATABASE :



SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: refresh_nilai_rata_rata(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.refresh_nilai_rata_rata() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    REFRESH MATERIALIZED VIEW CONCURRENTLY nilai_rata_rata_per_siswa;
    RETURN NULL;
END;
$$;


ALTER FUNCTION public.refresh_nilai_rata_rata() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: alamat; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.alamat (
    id integer NOT NULL,
    jalan character varying(255) NOT NULL,
    rt character varying(5),
    rw character varying(5),
    kelurahan_id integer NOT NULL,
    kode_pos character varying(10),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.alamat OWNER TO postgres;

--
-- Name: alamat_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.alamat_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.alamat_id_seq OWNER TO postgres;

--
-- Name: alamat_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.alamat_id_seq OWNED BY public.alamat.id;


--
-- Name: anggaran; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.anggaran (
    id integer NOT NULL,
    kategori_id integer NOT NULL,
    tahun_ajaran_id integer NOT NULL,
    semester_id integer,
    nama_anggaran character varying(100) NOT NULL,
    jumlah_anggaran numeric(15,2) NOT NULL,
    deskripsi text,
    tanggal_diajukan date DEFAULT CURRENT_DATE NOT NULL,
    status character varying(20) DEFAULT 'Diajukan'::character varying NOT NULL,
    created_by integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT anggaran_jumlah_anggaran_check CHECK ((jumlah_anggaran > (0)::numeric)),
    CONSTRAINT anggaran_status_check CHECK (((status)::text = ANY (ARRAY[('Diajukan'::character varying)::text, ('Disetujui'::character varying)::text, ('Ditolak'::character varying)::text, ('Direalisasi'::character varying)::text])))
);


ALTER TABLE public.anggaran OWNER TO postgres;

--
-- Name: anggaran_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.anggaran_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.anggaran_id_seq OWNER TO postgres;

--
-- Name: anggaran_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.anggaran_id_seq OWNED BY public.anggaran.id;


--
-- Name: audit_log; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.audit_log (
    id integer NOT NULL,
    user_id integer,
    action character varying(50) NOT NULL,
    table_name character varying(100) NOT NULL,
    record_id integer,
    old_data jsonb,
    new_data jsonb,
    ip_address character varying(45),
    user_agent text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.audit_log OWNER TO postgres;

--
-- Name: audit_log_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.audit_log_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.audit_log_id_seq OWNER TO postgres;

--
-- Name: audit_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.audit_log_id_seq OWNED BY public.audit_log.id;


--
-- Name: auth_group; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_group (
    id integer NOT NULL,
    name character varying(150) NOT NULL
);


ALTER TABLE public.auth_group OWNER TO postgres;

--
-- Name: auth_group_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_group ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_group_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_group_permissions (
    id bigint NOT NULL,
    group_id integer NOT NULL,
    permission_id integer NOT NULL
);


ALTER TABLE public.auth_group_permissions OWNER TO postgres;

--
-- Name: auth_group_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_group_permissions ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_group_permissions_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: auth_permission; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.auth_permission (
    id integer NOT NULL,
    name character varying(255) NOT NULL,
    content_type_id integer NOT NULL,
    codename character varying(100) NOT NULL
);


ALTER TABLE public.auth_permission OWNER TO postgres;

--
-- Name: auth_permission_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.auth_permission ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.auth_permission_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: beasiswa; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.beasiswa (
    id integer NOT NULL,
    nama_beasiswa character varying(100) NOT NULL,
    deskripsi text,
    persyaratan text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.beasiswa OWNER TO postgres;

--
-- Name: beasiswa_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.beasiswa_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.beasiswa_id_seq OWNER TO postgres;

--
-- Name: beasiswa_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.beasiswa_id_seq OWNED BY public.beasiswa.id;


--
-- Name: cache; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cache (
    key character varying(255) NOT NULL,
    value text NOT NULL,
    expiration integer NOT NULL
);


ALTER TABLE public.cache OWNER TO postgres;

--
-- Name: cache_locks; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cache_locks (
    key character varying(255) NOT NULL,
    owner character varying(255) NOT NULL,
    expiration integer NOT NULL
);


ALTER TABLE public.cache_locks OWNER TO postgres;

--
-- Name: django_admin_log; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_admin_log (
    id integer NOT NULL,
    action_time timestamp with time zone NOT NULL,
    object_id text,
    object_repr character varying(200) NOT NULL,
    action_flag smallint NOT NULL,
    change_message text NOT NULL,
    content_type_id integer,
    user_id bigint NOT NULL,
    CONSTRAINT django_admin_log_action_flag_check CHECK ((action_flag >= 0))
);


ALTER TABLE public.django_admin_log OWNER TO postgres;

--
-- Name: django_admin_log_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_admin_log ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_admin_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_content_type; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_content_type (
    id integer NOT NULL,
    app_label character varying(100) NOT NULL,
    model character varying(100) NOT NULL
);


ALTER TABLE public.django_content_type OWNER TO postgres;

--
-- Name: django_content_type_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_content_type ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_content_type_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_migrations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_migrations (
    id bigint NOT NULL,
    app character varying(255) NOT NULL,
    name character varying(255) NOT NULL,
    applied timestamp with time zone NOT NULL
);


ALTER TABLE public.django_migrations OWNER TO postgres;

--
-- Name: django_migrations_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.django_migrations ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.django_migrations_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: django_session; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.django_session (
    session_key character varying(40) NOT NULL,
    session_data text NOT NULL,
    expire_date timestamp with time zone NOT NULL
);


ALTER TABLE public.django_session OWNER TO postgres;

--
-- Name: failed_jobs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.failed_jobs (
    id bigint NOT NULL,
    uuid character varying(255) NOT NULL,
    connection text NOT NULL,
    queue text NOT NULL,
    payload text NOT NULL,
    exception text NOT NULL,
    failed_at timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.failed_jobs OWNER TO postgres;

--
-- Name: failed_jobs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.failed_jobs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.failed_jobs_id_seq OWNER TO postgres;

--
-- Name: failed_jobs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.failed_jobs_id_seq OWNED BY public.failed_jobs.id;


--
-- Name: guru; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.guru (
    id integer NOT NULL,
    user_id integer NOT NULL,
    nip character varying(20) NOT NULL,
    nama_lengkap character varying(100) NOT NULL,
    jenis_kelamin_id integer NOT NULL,
    tempat_lahir character varying(100),
    tanggal_lahir date,
    alamat_id integer,
    phone character varying(20),
    email character varying(100),
    foto_profile character varying(255),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    deleted_at timestamp without time zone
);


ALTER TABLE public.guru OWNER TO postgres;

--
-- Name: guru_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.guru_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.guru_id_seq OWNER TO postgres;

--
-- Name: guru_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.guru_id_seq OWNED BY public.guru.id;


--
-- Name: hari_libur; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.hari_libur (
    id integer NOT NULL,
    tanggal date NOT NULL,
    nama_hari_libur character varying(100) NOT NULL,
    deskripsi text,
    is_nasional boolean DEFAULT false,
    tahun_ajaran_id integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.hari_libur OWNER TO postgres;

--
-- Name: hari_libur_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.hari_libur_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.hari_libur_id_seq OWNER TO postgres;

--
-- Name: hari_libur_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.hari_libur_id_seq OWNED BY public.hari_libur.id;


--
-- Name: jadwal_pelajaran; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.jadwal_pelajaran (
    id integer NOT NULL,
    kelas_id integer NOT NULL,
    mata_pelajaran_id integer NOT NULL,
    guru_id integer NOT NULL,
    ruangan_id integer NOT NULL,
    semester_id integer NOT NULL,
    hari integer NOT NULL,
    jam_mulai time without time zone NOT NULL,
    jam_selesai time without time zone NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT jadwal_pelajaran_check CHECK ((jam_selesai > jam_mulai)),
    CONSTRAINT jadwal_pelajaran_hari_check CHECK (((hari >= 1) AND (hari <= 7)))
);


ALTER TABLE public.jadwal_pelajaran OWNER TO postgres;

--
-- Name: jadwal_pelajaran_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.jadwal_pelajaran_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.jadwal_pelajaran_id_seq OWNER TO postgres;

--
-- Name: jadwal_pelajaran_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.jadwal_pelajaran_id_seq OWNED BY public.jadwal_pelajaran.id;


--
-- Name: jenis_ujian; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.jenis_ujian (
    id integer NOT NULL,
    nama character varying(50) NOT NULL,
    bobot numeric(5,2) DEFAULT 1.0 NOT NULL,
    deskripsi text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT jenis_ujian_bobot_check CHECK ((bobot > (0)::numeric))
);


ALTER TABLE public.jenis_ujian OWNER TO postgres;

--
-- Name: jenis_ujian_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.jenis_ujian_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.jenis_ujian_id_seq OWNER TO postgres;

--
-- Name: jenis_ujian_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.jenis_ujian_id_seq OWNED BY public.jenis_ujian.id;


--
-- Name: job_batches; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.job_batches (
    id character varying(255) NOT NULL,
    name character varying(255) NOT NULL,
    total_jobs integer NOT NULL,
    pending_jobs integer NOT NULL,
    failed_jobs integer NOT NULL,
    failed_job_ids text NOT NULL,
    options text,
    cancelled_at integer,
    created_at integer NOT NULL,
    finished_at integer
);


ALTER TABLE public.job_batches OWNER TO postgres;

--
-- Name: jobs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.jobs (
    id bigint NOT NULL,
    queue character varying(255) NOT NULL,
    payload text NOT NULL,
    attempts smallint NOT NULL,
    reserved_at integer,
    available_at integer NOT NULL,
    created_at integer NOT NULL
);


ALTER TABLE public.jobs OWNER TO postgres;

--
-- Name: jobs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.jobs_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.jobs_id_seq OWNER TO postgres;

--
-- Name: jobs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.jobs_id_seq OWNED BY public.jobs.id;


--
-- Name: kelas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.kelas (
    id integer NOT NULL,
    nama character varying(50) NOT NULL,
    tingkat integer NOT NULL,
    tahun_ajaran_id integer NOT NULL,
    wali_kelas_id integer,
    kapasitas integer DEFAULT 30 NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT kelas_kapasitas_check CHECK ((kapasitas > 0)),
    CONSTRAINT kelas_tingkat_check CHECK (((tingkat >= 1) AND (tingkat <= 12)))
);


ALTER TABLE public.kelas OWNER TO postgres;

--
-- Name: kelas_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.kelas_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.kelas_id_seq OWNER TO postgres;

--
-- Name: kelas_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.kelas_id_seq OWNED BY public.kelas.id;


--
-- Name: kepala_sekolah; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.kepala_sekolah (
    id integer NOT NULL,
    guru_id integer NOT NULL,
    tanggal_mulai_jabatan date NOT NULL,
    tanggal_selesai_jabatan date,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.kepala_sekolah OWNER TO postgres;

--
-- Name: kepala_sekolah_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.kepala_sekolah_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.kepala_sekolah_id_seq OWNER TO postgres;

--
-- Name: kepala_sekolah_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.kepala_sekolah_id_seq OWNED BY public.kepala_sekolah.id;


--
-- Name: master_anggaran_kategori; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.master_anggaran_kategori (
    id integer NOT NULL,
    nama character varying(100) NOT NULL,
    deskripsi text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.master_anggaran_kategori OWNER TO postgres;

--
-- Name: master_anggaran_kategori_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.master_anggaran_kategori_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.master_anggaran_kategori_id_seq OWNER TO postgres;

--
-- Name: master_anggaran_kategori_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.master_anggaran_kategori_id_seq OWNED BY public.master_anggaran_kategori.id;


--
-- Name: master_jenis_kelamin; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.master_jenis_kelamin (
    id integer NOT NULL,
    nama character varying(20) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.master_jenis_kelamin OWNER TO postgres;

--
-- Name: master_jenis_kelamin_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.master_jenis_kelamin_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.master_jenis_kelamin_id_seq OWNER TO postgres;

--
-- Name: master_jenis_kelamin_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.master_jenis_kelamin_id_seq OWNED BY public.master_jenis_kelamin.id;


--
-- Name: master_kecamatan; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.master_kecamatan (
    id integer NOT NULL,
    kota_id integer NOT NULL,
    nama character varying(100) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.master_kecamatan OWNER TO postgres;

--
-- Name: master_kecamatan_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.master_kecamatan_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.master_kecamatan_id_seq OWNER TO postgres;

--
-- Name: master_kecamatan_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.master_kecamatan_id_seq OWNED BY public.master_kecamatan.id;


--
-- Name: master_kelurahan; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.master_kelurahan (
    id integer NOT NULL,
    kecamatan_id integer NOT NULL,
    nama character varying(100) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.master_kelurahan OWNER TO postgres;

--
-- Name: master_kelurahan_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.master_kelurahan_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.master_kelurahan_id_seq OWNER TO postgres;

--
-- Name: master_kelurahan_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.master_kelurahan_id_seq OWNED BY public.master_kelurahan.id;


--
-- Name: master_kota; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.master_kota (
    id integer NOT NULL,
    provinsi_id integer NOT NULL,
    nama character varying(100) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.master_kota OWNER TO postgres;

--
-- Name: master_kota_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.master_kota_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.master_kota_id_seq OWNER TO postgres;

--
-- Name: master_kota_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.master_kota_id_seq OWNED BY public.master_kota.id;


--
-- Name: master_provinsi; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.master_provinsi (
    id integer NOT NULL,
    nama character varying(100) NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.master_provinsi OWNER TO postgres;

--
-- Name: master_provinsi_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.master_provinsi_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.master_provinsi_id_seq OWNER TO postgres;

--
-- Name: master_provinsi_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.master_provinsi_id_seq OWNED BY public.master_provinsi.id;


--
-- Name: mata_pelajaran; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.mata_pelajaran (
    id integer NOT NULL,
    nama character varying(100) NOT NULL,
    kode character varying(20) NOT NULL,
    tingkat_min integer,
    tingkat_max integer,
    deskripsi text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT mata_pelajaran_check CHECK ((tingkat_min <= tingkat_max)),
    CONSTRAINT mata_pelajaran_tingkat_max_check CHECK ((tingkat_max <= 12)),
    CONSTRAINT mata_pelajaran_tingkat_min_check CHECK ((tingkat_min >= 1))
);


ALTER TABLE public.mata_pelajaran OWNER TO postgres;

--
-- Name: mata_pelajaran_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.mata_pelajaran_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.mata_pelajaran_id_seq OWNER TO postgres;

--
-- Name: mata_pelajaran_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.mata_pelajaran_id_seq OWNED BY public.mata_pelajaran.id;


--
-- Name: migrations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.migrations (
    id integer NOT NULL,
    migration character varying(255) NOT NULL,
    batch integer NOT NULL
);


ALTER TABLE public.migrations OWNER TO postgres;

--
-- Name: migrations_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.migrations_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.migrations_id_seq OWNER TO postgres;

--
-- Name: migrations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.migrations_id_seq OWNED BY public.migrations.id;


--
-- Name: nilai_siswa; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.nilai_siswa (
    id integer NOT NULL,
    siswa_id integer NOT NULL,
    ujian_id integer NOT NULL,
    nilai numeric(5,2) NOT NULL,
    catatan text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT nilai_siswa_nilai_check CHECK (((nilai >= (0)::numeric) AND (nilai <= (100)::numeric)))
);


ALTER TABLE public.nilai_siswa OWNER TO postgres;

--
-- Name: siswa; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.siswa (
    id integer NOT NULL,
    user_id integer,
    nis character varying(20) NOT NULL,
    nisn character varying(20),
    nama_lengkap character varying(100) NOT NULL,
    jenis_kelamin_id integer NOT NULL,
    tempat_lahir character varying(100),
    tanggal_lahir date,
    agama character varying(50),
    alamat_id integer,
    phone character varying(20),
    email character varying(100),
    foto_profile character varying(255),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    deleted_at timestamp without time zone
);


ALTER TABLE public.siswa OWNER TO postgres;

--
-- Name: siswa_kelas; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.siswa_kelas (
    siswa_id integer NOT NULL,
    kelas_id integer NOT NULL,
    semester_id integer NOT NULL,
    tanggal_masuk date DEFAULT CURRENT_DATE NOT NULL,
    tanggal_keluar date,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.siswa_kelas OWNER TO postgres;

--
-- Name: ujian; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ujian (
    id integer NOT NULL,
    jenis_ujian_id integer NOT NULL,
    mata_pelajaran_id integer NOT NULL,
    kelas_id integer NOT NULL,
    semester_id integer NOT NULL,
    tanggal_ujian date NOT NULL,
    jam_mulai time without time zone NOT NULL,
    jam_selesai time without time zone NOT NULL,
    ruangan_id integer,
    guru_id integer NOT NULL,
    deskripsi text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT ujian_check CHECK ((jam_selesai > jam_mulai))
);


ALTER TABLE public.ujian OWNER TO postgres;

--
-- Name: nilai_rata_rata_per_siswa; Type: MATERIALIZED VIEW; Schema: public; Owner: postgres
--

CREATE MATERIALIZED VIEW public.nilai_rata_rata_per_siswa AS
 SELECT s.id AS siswa_id,
    s.nama_lengkap,
    k.id AS kelas_id,
    k.nama AS nama_kelas,
    mp.id AS mata_pelajaran_id,
    mp.nama AS nama_mata_pelajaran,
    avg(ns.nilai) AS rata_rata_nilai
   FROM (((((public.siswa s
     JOIN public.siswa_kelas sk ON ((s.id = sk.siswa_id)))
     JOIN public.kelas k ON ((sk.kelas_id = k.id)))
     JOIN public.ujian u ON ((k.id = u.kelas_id)))
     JOIN public.mata_pelajaran mp ON ((u.mata_pelajaran_id = mp.id)))
     JOIN public.nilai_siswa ns ON (((s.id = ns.siswa_id) AND (u.id = ns.ujian_id))))
  WHERE (sk.is_active = true)
  GROUP BY s.id, s.nama_lengkap, k.id, k.nama, mp.id, mp.nama
  WITH NO DATA;


ALTER MATERIALIZED VIEW public.nilai_rata_rata_per_siswa OWNER TO postgres;

--
-- Name: nilai_siswa_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.nilai_siswa_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.nilai_siswa_id_seq OWNER TO postgres;

--
-- Name: nilai_siswa_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.nilai_siswa_id_seq OWNED BY public.nilai_siswa.id;


--
-- Name: orang_tua; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.orang_tua (
    id integer NOT NULL,
    user_id integer,
    nik character varying(20) NOT NULL,
    nama_lengkap character varying(100) NOT NULL,
    jenis_kelamin_id integer NOT NULL,
    tempat_lahir character varying(100),
    tanggal_lahir date,
    agama character varying(50),
    phone character varying(20) NOT NULL,
    email character varying(100),
    pekerjaan character varying(100),
    penghasilan_per_bulan numeric(15,2),
    alamat_id integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    deleted_at timestamp without time zone
);


ALTER TABLE public.orang_tua OWNER TO postgres;

--
-- Name: orang_tua_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.orang_tua_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.orang_tua_id_seq OWNER TO postgres;

--
-- Name: orang_tua_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.orang_tua_id_seq OWNED BY public.orang_tua.id;


--
-- Name: pendaftaran_siswa; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.pendaftaran_siswa (
    id integer NOT NULL,
    siswa_id integer,
    tahun_ajaran_id integer NOT NULL,
    semester_id integer NOT NULL,
    nama_lengkap character varying(100) NOT NULL,
    jenis_kelamin_id integer NOT NULL,
    tempat_lahir character varying(100),
    tanggal_lahir date,
    alamat text NOT NULL,
    phone character varying(20) NOT NULL,
    email character varying(100),
    nama_ayah character varying(100),
    phone_ayah character varying(20),
    nama_ibu character varying(100),
    phone_ibu character varying(20),
    asal_sekolah character varying(100),
    nilai_raport numeric(5,2),
    status character varying(20) DEFAULT 'Menunggu'::character varying NOT NULL,
    tanggal_daftar date DEFAULT CURRENT_DATE NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT pendaftaran_siswa_status_check CHECK (((status)::text = ANY (ARRAY[('Menunggu'::character varying)::text, ('Diterima'::character varying)::text, ('Ditolak'::character varying)::text, ('Lulus Seleksi'::character varying)::text])))
);


ALTER TABLE public.pendaftaran_siswa OWNER TO postgres;

--
-- Name: pendaftaran_siswa_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.pendaftaran_siswa_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.pendaftaran_siswa_id_seq OWNER TO postgres;

--
-- Name: pendaftaran_siswa_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.pendaftaran_siswa_id_seq OWNED BY public.pendaftaran_siswa.id;


--
-- Name: pengeluaran; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.pengeluaran (
    id integer NOT NULL,
    anggaran_id integer,
    tahun_ajaran_id integer NOT NULL,
    semester_id integer,
    nama_pengeluaran character varying(100) NOT NULL,
    jumlah numeric(15,2) NOT NULL,
    deskripsi text,
    tanggal_pengeluaran date DEFAULT CURRENT_DATE NOT NULL,
    bukti_pengeluaran character varying(255),
    created_by integer NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT pengeluaran_jumlah_check CHECK ((jumlah > (0)::numeric))
);


ALTER TABLE public.pengeluaran OWNER TO postgres;

--
-- Name: pengeluaran_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.pengeluaran_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.pengeluaran_id_seq OWNER TO postgres;

--
-- Name: pengeluaran_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.pengeluaran_id_seq OWNED BY public.pengeluaran.id;


--
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    id integer NOT NULL,
    name character varying(50) NOT NULL,
    description text,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.roles_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.roles_id_seq OWNER TO postgres;

--
-- Name: roles_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.roles_id_seq OWNED BY public.roles.id;


--
-- Name: ruangan; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.ruangan (
    id integer NOT NULL,
    nama character varying(50) NOT NULL,
    kapasitas integer DEFAULT 30 NOT NULL,
    lokasi character varying(100),
    tipe_ruangan character varying(50) DEFAULT 'Kelas'::character varying,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT ruangan_kapasitas_check CHECK ((kapasitas > 0)),
    CONSTRAINT ruangan_tipe_ruangan_check CHECK (((tipe_ruangan)::text = ANY (ARRAY[('Kelas'::character varying)::text, ('Lab'::character varying)::text, ('Perpustakaan'::character varying)::text, ('Aula'::character varying)::text, ('Kantor'::character varying)::text])))
);


ALTER TABLE public.ruangan OWNER TO postgres;

--
-- Name: ruangan_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ruangan_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.ruangan_id_seq OWNER TO postgres;

--
-- Name: ruangan_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.ruangan_id_seq OWNED BY public.ruangan.id;


--
-- Name: semester; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.semester (
    id integer NOT NULL,
    tahun_ajaran_id integer NOT NULL,
    nama character varying(20) NOT NULL,
    semester_ke integer NOT NULL,
    tanggal_mulai date NOT NULL,
    tanggal_selesai date NOT NULL,
    is_active boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT semester_check CHECK ((tanggal_selesai > tanggal_mulai)),
    CONSTRAINT semester_semester_ke_check CHECK (((semester_ke >= 1) AND (semester_ke <= 2)))
);


ALTER TABLE public.semester OWNER TO postgres;

--
-- Name: semester_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.semester_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.semester_id_seq OWNER TO postgres;

--
-- Name: semester_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.semester_id_seq OWNED BY public.semester.id;


--
-- Name: sessions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sessions (
    id character varying(255) NOT NULL,
    user_id bigint,
    ip_address character varying(45),
    user_agent text,
    payload text NOT NULL,
    last_activity integer NOT NULL
);


ALTER TABLE public.sessions OWNER TO postgres;

--
-- Name: siswa_beasiswa; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.siswa_beasiswa (
    siswa_id integer NOT NULL,
    beasiswa_id integer NOT NULL,
    tahun_ajaran_id integer NOT NULL,
    semester_id integer NOT NULL,
    tanggal_mulai date NOT NULL,
    tanggal_selesai date,
    jumlah_bantuan numeric(15,2),
    status character varying(20) DEFAULT 'Aktif'::character varying NOT NULL,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT siswa_beasiswa_status_check CHECK (((status)::text = ANY (ARRAY[('Aktif'::character varying)::text, ('Selesai'::character varying)::text, ('Dibatalkan'::character varying)::text])))
);


ALTER TABLE public.siswa_beasiswa OWNER TO postgres;

--
-- Name: siswa_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.siswa_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.siswa_id_seq OWNER TO postgres;

--
-- Name: siswa_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.siswa_id_seq OWNED BY public.siswa.id;


--
-- Name: siswa_orang_tua; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.siswa_orang_tua (
    siswa_id integer NOT NULL,
    orang_tua_id integer NOT NULL,
    hubungan character varying(50) NOT NULL,
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT siswa_orang_tua_hubungan_check CHECK (((hubungan)::text = ANY (ARRAY[('Ayah'::character varying)::text, ('Ibu'::character varying)::text, ('Wali'::character varying)::text])))
);


ALTER TABLE public.siswa_orang_tua OWNER TO postgres;

--
-- Name: tahun_ajaran; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tahun_ajaran (
    id integer NOT NULL,
    nama character varying(50) NOT NULL,
    tahun_mulai integer NOT NULL,
    tahun_selesai integer NOT NULL,
    is_active boolean DEFAULT false,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT tahun_ajaran_check CHECK ((tahun_selesai > tahun_mulai))
);


ALTER TABLE public.tahun_ajaran OWNER TO postgres;

--
-- Name: tahun_ajaran_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tahun_ajaran_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tahun_ajaran_id_seq OWNER TO postgres;

--
-- Name: tahun_ajaran_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tahun_ajaran_id_seq OWNED BY public.tahun_ajaran.id;


--
-- Name: transaksi_pembayaran; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.transaksi_pembayaran (
    id integer NOT NULL,
    siswa_id integer NOT NULL,
    tahun_ajaran_id integer NOT NULL,
    semester_id integer,
    jenis_pembayaran character varying(50) NOT NULL,
    jumlah numeric(15,2) NOT NULL,
    tanggal_pembayaran date DEFAULT CURRENT_DATE NOT NULL,
    bukti_pembayaran character varying(255),
    status character varying(20) DEFAULT 'Belum Lunas'::character varying NOT NULL,
    created_by integer,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT transaksi_pembayaran_jumlah_check CHECK ((jumlah > (0)::numeric)),
    CONSTRAINT transaksi_pembayaran_status_check CHECK (((status)::text = ANY (ARRAY[('Belum Lunas'::character varying)::text, ('Lunas'::character varying)::text, ('Ditolak'::character varying)::text])))
);


ALTER TABLE public.transaksi_pembayaran OWNER TO postgres;

--
-- Name: transaksi_pembayaran_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.transaksi_pembayaran_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.transaksi_pembayaran_id_seq OWNER TO postgres;

--
-- Name: transaksi_pembayaran_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.transaksi_pembayaran_id_seq OWNED BY public.transaksi_pembayaran.id;


--
-- Name: ujian_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.ujian_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.ujian_id_seq OWNER TO postgres;

--
-- Name: ujian_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.ujian_id_seq OWNED BY public.ujian.id;


--
-- Name: user_roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_roles (
    user_id integer NOT NULL,
    role_id integer NOT NULL
);


ALTER TABLE public.user_roles OWNER TO postgres;

--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id integer NOT NULL,
    username character varying(50) NOT NULL,
    password character varying(255) NOT NULL,
    email character varying(100),
    phone character varying(20),
    is_active boolean DEFAULT true,
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    updated_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    deleted_at timestamp without time zone,
    remember_token character varying(100)
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.users_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.users_id_seq OWNER TO postgres;

--
-- Name: users_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.users_id_seq OWNED BY public.users.id;


--
-- Name: alamat id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alamat ALTER COLUMN id SET DEFAULT nextval('public.alamat_id_seq'::regclass);


--
-- Name: anggaran id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anggaran ALTER COLUMN id SET DEFAULT nextval('public.anggaran_id_seq'::regclass);


--
-- Name: audit_log id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.audit_log ALTER COLUMN id SET DEFAULT nextval('public.audit_log_id_seq'::regclass);


--
-- Name: beasiswa id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.beasiswa ALTER COLUMN id SET DEFAULT nextval('public.beasiswa_id_seq'::regclass);


--
-- Name: failed_jobs id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.failed_jobs ALTER COLUMN id SET DEFAULT nextval('public.failed_jobs_id_seq'::regclass);


--
-- Name: guru id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guru ALTER COLUMN id SET DEFAULT nextval('public.guru_id_seq'::regclass);


--
-- Name: hari_libur id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hari_libur ALTER COLUMN id SET DEFAULT nextval('public.hari_libur_id_seq'::regclass);


--
-- Name: jadwal_pelajaran id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran ALTER COLUMN id SET DEFAULT nextval('public.jadwal_pelajaran_id_seq'::regclass);


--
-- Name: jenis_ujian id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jenis_ujian ALTER COLUMN id SET DEFAULT nextval('public.jenis_ujian_id_seq'::regclass);


--
-- Name: jobs id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jobs ALTER COLUMN id SET DEFAULT nextval('public.jobs_id_seq'::regclass);


--
-- Name: kelas id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kelas ALTER COLUMN id SET DEFAULT nextval('public.kelas_id_seq'::regclass);


--
-- Name: kepala_sekolah id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kepala_sekolah ALTER COLUMN id SET DEFAULT nextval('public.kepala_sekolah_id_seq'::regclass);


--
-- Name: master_anggaran_kategori id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_anggaran_kategori ALTER COLUMN id SET DEFAULT nextval('public.master_anggaran_kategori_id_seq'::regclass);


--
-- Name: master_jenis_kelamin id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_jenis_kelamin ALTER COLUMN id SET DEFAULT nextval('public.master_jenis_kelamin_id_seq'::regclass);


--
-- Name: master_kecamatan id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kecamatan ALTER COLUMN id SET DEFAULT nextval('public.master_kecamatan_id_seq'::regclass);


--
-- Name: master_kelurahan id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kelurahan ALTER COLUMN id SET DEFAULT nextval('public.master_kelurahan_id_seq'::regclass);


--
-- Name: master_kota id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kota ALTER COLUMN id SET DEFAULT nextval('public.master_kota_id_seq'::regclass);


--
-- Name: master_provinsi id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_provinsi ALTER COLUMN id SET DEFAULT nextval('public.master_provinsi_id_seq'::regclass);


--
-- Name: mata_pelajaran id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mata_pelajaran ALTER COLUMN id SET DEFAULT nextval('public.mata_pelajaran_id_seq'::regclass);


--
-- Name: migrations id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.migrations ALTER COLUMN id SET DEFAULT nextval('public.migrations_id_seq'::regclass);


--
-- Name: nilai_siswa id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.nilai_siswa ALTER COLUMN id SET DEFAULT nextval('public.nilai_siswa_id_seq'::regclass);


--
-- Name: orang_tua id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orang_tua ALTER COLUMN id SET DEFAULT nextval('public.orang_tua_id_seq'::regclass);


--
-- Name: pendaftaran_siswa id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pendaftaran_siswa ALTER COLUMN id SET DEFAULT nextval('public.pendaftaran_siswa_id_seq'::regclass);


--
-- Name: pengeluaran id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pengeluaran ALTER COLUMN id SET DEFAULT nextval('public.pengeluaran_id_seq'::regclass);


--
-- Name: roles id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles ALTER COLUMN id SET DEFAULT nextval('public.roles_id_seq'::regclass);


--
-- Name: ruangan id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ruangan ALTER COLUMN id SET DEFAULT nextval('public.ruangan_id_seq'::regclass);


--
-- Name: semester id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.semester ALTER COLUMN id SET DEFAULT nextval('public.semester_id_seq'::regclass);


--
-- Name: siswa id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa ALTER COLUMN id SET DEFAULT nextval('public.siswa_id_seq'::regclass);


--
-- Name: tahun_ajaran id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tahun_ajaran ALTER COLUMN id SET DEFAULT nextval('public.tahun_ajaran_id_seq'::regclass);


--
-- Name: transaksi_pembayaran id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaksi_pembayaran ALTER COLUMN id SET DEFAULT nextval('public.transaksi_pembayaran_id_seq'::regclass);


--
-- Name: ujian id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian ALTER COLUMN id SET DEFAULT nextval('public.ujian_id_seq'::regclass);


--
-- Name: users id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users ALTER COLUMN id SET DEFAULT nextval('public.users_id_seq'::regclass);


--
-- Name: alamat alamat_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alamat
    ADD CONSTRAINT alamat_pkey PRIMARY KEY (id);


--
-- Name: anggaran anggaran_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anggaran
    ADD CONSTRAINT anggaran_pkey PRIMARY KEY (id);


--
-- Name: audit_log audit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.audit_log
    ADD CONSTRAINT audit_log_pkey PRIMARY KEY (id);


--
-- Name: auth_group auth_group_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_name_key UNIQUE (name);


--
-- Name: auth_group_permissions auth_group_permissions_group_id_permission_id_0cd325b0_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_permission_id_0cd325b0_uniq UNIQUE (group_id, permission_id);


--
-- Name: auth_group_permissions auth_group_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_pkey PRIMARY KEY (id);


--
-- Name: auth_group auth_group_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group
    ADD CONSTRAINT auth_group_pkey PRIMARY KEY (id);


--
-- Name: auth_permission auth_permission_content_type_id_codename_01ab375a_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_codename_01ab375a_uniq UNIQUE (content_type_id, codename);


--
-- Name: auth_permission auth_permission_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_pkey PRIMARY KEY (id);


--
-- Name: beasiswa beasiswa_nama_beasiswa_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.beasiswa
    ADD CONSTRAINT beasiswa_nama_beasiswa_key UNIQUE (nama_beasiswa);


--
-- Name: beasiswa beasiswa_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.beasiswa
    ADD CONSTRAINT beasiswa_pkey PRIMARY KEY (id);


--
-- Name: cache_locks cache_locks_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cache_locks
    ADD CONSTRAINT cache_locks_pkey PRIMARY KEY (key);


--
-- Name: cache cache_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cache
    ADD CONSTRAINT cache_pkey PRIMARY KEY (key);


--
-- Name: django_admin_log django_admin_log_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_pkey PRIMARY KEY (id);


--
-- Name: django_content_type django_content_type_app_label_model_76bd3d3b_uniq; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_app_label_model_76bd3d3b_uniq UNIQUE (app_label, model);


--
-- Name: django_content_type django_content_type_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_content_type
    ADD CONSTRAINT django_content_type_pkey PRIMARY KEY (id);


--
-- Name: django_migrations django_migrations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_migrations
    ADD CONSTRAINT django_migrations_pkey PRIMARY KEY (id);


--
-- Name: django_session django_session_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_session
    ADD CONSTRAINT django_session_pkey PRIMARY KEY (session_key);


--
-- Name: failed_jobs failed_jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.failed_jobs
    ADD CONSTRAINT failed_jobs_pkey PRIMARY KEY (id);


--
-- Name: failed_jobs failed_jobs_uuid_unique; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.failed_jobs
    ADD CONSTRAINT failed_jobs_uuid_unique UNIQUE (uuid);


--
-- Name: guru guru_nip_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guru
    ADD CONSTRAINT guru_nip_key UNIQUE (nip);


--
-- Name: guru guru_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guru
    ADD CONSTRAINT guru_pkey PRIMARY KEY (id);


--
-- Name: guru guru_user_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guru
    ADD CONSTRAINT guru_user_id_key UNIQUE (user_id);


--
-- Name: hari_libur hari_libur_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hari_libur
    ADD CONSTRAINT hari_libur_pkey PRIMARY KEY (id);


--
-- Name: hari_libur hari_libur_tanggal_tahun_ajaran_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hari_libur
    ADD CONSTRAINT hari_libur_tanggal_tahun_ajaran_id_key UNIQUE (tanggal, tahun_ajaran_id);


--
-- Name: jadwal_pelajaran jadwal_pelajaran_kelas_id_hari_jam_mulai_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran
    ADD CONSTRAINT jadwal_pelajaran_kelas_id_hari_jam_mulai_key UNIQUE (kelas_id, hari, jam_mulai);


--
-- Name: jadwal_pelajaran jadwal_pelajaran_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran
    ADD CONSTRAINT jadwal_pelajaran_pkey PRIMARY KEY (id);


--
-- Name: jenis_ujian jenis_ujian_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jenis_ujian
    ADD CONSTRAINT jenis_ujian_nama_key UNIQUE (nama);


--
-- Name: jenis_ujian jenis_ujian_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jenis_ujian
    ADD CONSTRAINT jenis_ujian_pkey PRIMARY KEY (id);


--
-- Name: job_batches job_batches_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.job_batches
    ADD CONSTRAINT job_batches_pkey PRIMARY KEY (id);


--
-- Name: jobs jobs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jobs
    ADD CONSTRAINT jobs_pkey PRIMARY KEY (id);


--
-- Name: kelas kelas_nama_tahun_ajaran_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kelas
    ADD CONSTRAINT kelas_nama_tahun_ajaran_id_key UNIQUE (nama, tahun_ajaran_id);


--
-- Name: kelas kelas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kelas
    ADD CONSTRAINT kelas_pkey PRIMARY KEY (id);


--
-- Name: kepala_sekolah kepala_sekolah_guru_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kepala_sekolah
    ADD CONSTRAINT kepala_sekolah_guru_id_key UNIQUE (guru_id);


--
-- Name: kepala_sekolah kepala_sekolah_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kepala_sekolah
    ADD CONSTRAINT kepala_sekolah_pkey PRIMARY KEY (id);


--
-- Name: master_anggaran_kategori master_anggaran_kategori_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_anggaran_kategori
    ADD CONSTRAINT master_anggaran_kategori_nama_key UNIQUE (nama);


--
-- Name: master_anggaran_kategori master_anggaran_kategori_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_anggaran_kategori
    ADD CONSTRAINT master_anggaran_kategori_pkey PRIMARY KEY (id);


--
-- Name: master_jenis_kelamin master_jenis_kelamin_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_jenis_kelamin
    ADD CONSTRAINT master_jenis_kelamin_nama_key UNIQUE (nama);


--
-- Name: master_jenis_kelamin master_jenis_kelamin_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_jenis_kelamin
    ADD CONSTRAINT master_jenis_kelamin_pkey PRIMARY KEY (id);


--
-- Name: master_kecamatan master_kecamatan_kota_id_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kecamatan
    ADD CONSTRAINT master_kecamatan_kota_id_nama_key UNIQUE (kota_id, nama);


--
-- Name: master_kecamatan master_kecamatan_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kecamatan
    ADD CONSTRAINT master_kecamatan_pkey PRIMARY KEY (id);


--
-- Name: master_kelurahan master_kelurahan_kecamatan_id_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kelurahan
    ADD CONSTRAINT master_kelurahan_kecamatan_id_nama_key UNIQUE (kecamatan_id, nama);


--
-- Name: master_kelurahan master_kelurahan_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kelurahan
    ADD CONSTRAINT master_kelurahan_pkey PRIMARY KEY (id);


--
-- Name: master_kota master_kota_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kota
    ADD CONSTRAINT master_kota_pkey PRIMARY KEY (id);


--
-- Name: master_kota master_kota_provinsi_id_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kota
    ADD CONSTRAINT master_kota_provinsi_id_nama_key UNIQUE (provinsi_id, nama);


--
-- Name: master_provinsi master_provinsi_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_provinsi
    ADD CONSTRAINT master_provinsi_nama_key UNIQUE (nama);


--
-- Name: master_provinsi master_provinsi_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_provinsi
    ADD CONSTRAINT master_provinsi_pkey PRIMARY KEY (id);


--
-- Name: mata_pelajaran mata_pelajaran_kode_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mata_pelajaran
    ADD CONSTRAINT mata_pelajaran_kode_key UNIQUE (kode);


--
-- Name: mata_pelajaran mata_pelajaran_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mata_pelajaran
    ADD CONSTRAINT mata_pelajaran_nama_key UNIQUE (nama);


--
-- Name: mata_pelajaran mata_pelajaran_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.mata_pelajaran
    ADD CONSTRAINT mata_pelajaran_pkey PRIMARY KEY (id);


--
-- Name: migrations migrations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.migrations
    ADD CONSTRAINT migrations_pkey PRIMARY KEY (id);


--
-- Name: nilai_siswa nilai_siswa_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.nilai_siswa
    ADD CONSTRAINT nilai_siswa_pkey PRIMARY KEY (id);


--
-- Name: nilai_siswa nilai_siswa_siswa_id_ujian_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.nilai_siswa
    ADD CONSTRAINT nilai_siswa_siswa_id_ujian_id_key UNIQUE (siswa_id, ujian_id);


--
-- Name: orang_tua orang_tua_nik_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orang_tua
    ADD CONSTRAINT orang_tua_nik_key UNIQUE (nik);


--
-- Name: orang_tua orang_tua_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orang_tua
    ADD CONSTRAINT orang_tua_pkey PRIMARY KEY (id);


--
-- Name: pendaftaran_siswa pendaftaran_siswa_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pendaftaran_siswa
    ADD CONSTRAINT pendaftaran_siswa_pkey PRIMARY KEY (id);


--
-- Name: pengeluaran pengeluaran_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pengeluaran
    ADD CONSTRAINT pengeluaran_pkey PRIMARY KEY (id);


--
-- Name: roles roles_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_name_key UNIQUE (name);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- Name: ruangan ruangan_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ruangan
    ADD CONSTRAINT ruangan_nama_key UNIQUE (nama);


--
-- Name: ruangan ruangan_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ruangan
    ADD CONSTRAINT ruangan_pkey PRIMARY KEY (id);


--
-- Name: semester semester_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.semester
    ADD CONSTRAINT semester_pkey PRIMARY KEY (id);


--
-- Name: semester semester_tahun_ajaran_id_semester_ke_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.semester
    ADD CONSTRAINT semester_tahun_ajaran_id_semester_ke_key UNIQUE (tahun_ajaran_id, semester_ke);


--
-- Name: sessions sessions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sessions
    ADD CONSTRAINT sessions_pkey PRIMARY KEY (id);


--
-- Name: siswa_beasiswa siswa_beasiswa_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_beasiswa
    ADD CONSTRAINT siswa_beasiswa_pkey PRIMARY KEY (siswa_id, beasiswa_id, tahun_ajaran_id, semester_id);


--
-- Name: siswa_kelas siswa_kelas_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_kelas
    ADD CONSTRAINT siswa_kelas_pkey PRIMARY KEY (siswa_id, kelas_id, semester_id);


--
-- Name: siswa siswa_nis_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa
    ADD CONSTRAINT siswa_nis_key UNIQUE (nis);


--
-- Name: siswa siswa_nisn_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa
    ADD CONSTRAINT siswa_nisn_key UNIQUE (nisn);


--
-- Name: siswa_orang_tua siswa_orang_tua_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_orang_tua
    ADD CONSTRAINT siswa_orang_tua_pkey PRIMARY KEY (siswa_id, orang_tua_id, hubungan);


--
-- Name: siswa siswa_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa
    ADD CONSTRAINT siswa_pkey PRIMARY KEY (id);


--
-- Name: tahun_ajaran tahun_ajaran_nama_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tahun_ajaran
    ADD CONSTRAINT tahun_ajaran_nama_key UNIQUE (nama);


--
-- Name: tahun_ajaran tahun_ajaran_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tahun_ajaran
    ADD CONSTRAINT tahun_ajaran_pkey PRIMARY KEY (id);


--
-- Name: transaksi_pembayaran transaksi_pembayaran_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaksi_pembayaran
    ADD CONSTRAINT transaksi_pembayaran_pkey PRIMARY KEY (id);


--
-- Name: ujian ujian_kelas_id_mata_pelajaran_id_tanggal_ujian_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_kelas_id_mata_pelajaran_id_tanggal_ujian_key UNIQUE (kelas_id, mata_pelajaran_id, tanggal_ujian);


--
-- Name: ujian ujian_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_pkey PRIMARY KEY (id);


--
-- Name: user_roles user_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_pkey PRIMARY KEY (user_id, role_id);


--
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: users users_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_username_key UNIQUE (username);


--
-- Name: auth_group_name_a6ea08ec_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_name_a6ea08ec_like ON public.auth_group USING btree (name varchar_pattern_ops);


--
-- Name: auth_group_permissions_group_id_b120cbf9; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_permissions_group_id_b120cbf9 ON public.auth_group_permissions USING btree (group_id);


--
-- Name: auth_group_permissions_permission_id_84c5c92e; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_group_permissions_permission_id_84c5c92e ON public.auth_group_permissions USING btree (permission_id);


--
-- Name: auth_permission_content_type_id_2f476e4b; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX auth_permission_content_type_id_2f476e4b ON public.auth_permission USING btree (content_type_id);


--
-- Name: django_admin_log_content_type_id_c4bce8eb; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_admin_log_content_type_id_c4bce8eb ON public.django_admin_log USING btree (content_type_id);


--
-- Name: django_admin_log_user_id_c564eba6; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_admin_log_user_id_c564eba6 ON public.django_admin_log USING btree (user_id);


--
-- Name: django_session_expire_date_a5c62663; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_session_expire_date_a5c62663 ON public.django_session USING btree (expire_date);


--
-- Name: django_session_session_key_c0390e0f_like; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX django_session_session_key_c0390e0f_like ON public.django_session USING btree (session_key varchar_pattern_ops);


--
-- Name: idx_alamat_kelurahan_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_alamat_kelurahan_id ON public.alamat USING btree (kelurahan_id);


--
-- Name: idx_alamat_kode_pos; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_alamat_kode_pos ON public.alamat USING btree (kode_pos);


--
-- Name: idx_anggaran_semester_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_anggaran_semester_id ON public.anggaran USING btree (semester_id);


--
-- Name: idx_anggaran_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_anggaran_status ON public.anggaran USING btree (status);


--
-- Name: idx_anggaran_tahun_ajaran_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_anggaran_tahun_ajaran_id ON public.anggaran USING btree (tahun_ajaran_id);


--
-- Name: idx_audit_log_action; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_audit_log_action ON public.audit_log USING btree (action);


--
-- Name: idx_audit_log_created_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_audit_log_created_at ON public.audit_log USING btree (created_at);


--
-- Name: idx_audit_log_user_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_audit_log_user_id ON public.audit_log USING btree (user_id);


--
-- Name: idx_beasiswa_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_beasiswa_nama ON public.beasiswa USING btree (nama_beasiswa);


--
-- Name: idx_guru_nama_lengkap; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_guru_nama_lengkap ON public.guru USING btree (nama_lengkap);


--
-- Name: idx_guru_nip; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_guru_nip ON public.guru USING btree (nip);


--
-- Name: idx_guru_user_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_guru_user_id ON public.guru USING btree (user_id);


--
-- Name: idx_hari_libur_tahun_ajaran_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_hari_libur_tahun_ajaran_id ON public.hari_libur USING btree (tahun_ajaran_id);


--
-- Name: idx_hari_libur_tanggal; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_hari_libur_tanggal ON public.hari_libur USING btree (tanggal);


--
-- Name: idx_jadwal_pelajaran_hari; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_jadwal_pelajaran_hari ON public.jadwal_pelajaran USING btree (hari);


--
-- Name: idx_jadwal_pelajaran_kelas_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_jadwal_pelajaran_kelas_id ON public.jadwal_pelajaran USING btree (kelas_id);


--
-- Name: idx_jadwal_pelajaran_semester_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_jadwal_pelajaran_semester_id ON public.jadwal_pelajaran USING btree (semester_id);


--
-- Name: idx_jenis_ujian_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_jenis_ujian_nama ON public.jenis_ujian USING btree (nama);


--
-- Name: idx_kelas_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_kelas_nama ON public.kelas USING btree (nama);


--
-- Name: idx_kelas_tingkat; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_kelas_tingkat ON public.kelas USING btree (tingkat);


--
-- Name: idx_kelas_wali_kelas_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_kelas_wali_kelas_id ON public.kelas USING btree (wali_kelas_id);


--
-- Name: idx_kepala_sekolah_guru_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_kepala_sekolah_guru_id ON public.kepala_sekolah USING btree (guru_id);


--
-- Name: idx_master_anggaran_kategori_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_anggaran_kategori_nama ON public.master_anggaran_kategori USING btree (nama);


--
-- Name: idx_master_jenis_kelamin_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_jenis_kelamin_nama ON public.master_jenis_kelamin USING btree (nama);


--
-- Name: idx_master_kecamatan_kota_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_kecamatan_kota_id ON public.master_kecamatan USING btree (kota_id);


--
-- Name: idx_master_kecamatan_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_kecamatan_nama ON public.master_kecamatan USING btree (nama);


--
-- Name: idx_master_kelurahan_kecamatan_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_kelurahan_kecamatan_id ON public.master_kelurahan USING btree (kecamatan_id);


--
-- Name: idx_master_kelurahan_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_kelurahan_nama ON public.master_kelurahan USING btree (nama);


--
-- Name: idx_master_kota_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_kota_nama ON public.master_kota USING btree (nama);


--
-- Name: idx_master_kota_provinsi_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_kota_provinsi_id ON public.master_kota USING btree (provinsi_id);


--
-- Name: idx_master_provinsi_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_master_provinsi_nama ON public.master_provinsi USING btree (nama);


--
-- Name: idx_mata_pelajaran_kode; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_mata_pelajaran_kode ON public.mata_pelajaran USING btree (kode);


--
-- Name: idx_mata_pelajaran_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_mata_pelajaran_nama ON public.mata_pelajaran USING btree (nama);


--
-- Name: idx_nilai_rata_rata_siswa_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_nilai_rata_rata_siswa_id ON public.nilai_rata_rata_per_siswa USING btree (siswa_id);


--
-- Name: idx_nilai_siswa_nilai; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_nilai_siswa_nilai ON public.nilai_siswa USING btree (nilai);


--
-- Name: idx_nilai_siswa_siswa_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_nilai_siswa_siswa_id ON public.nilai_siswa USING btree (siswa_id);


--
-- Name: idx_nilai_siswa_ujian_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_nilai_siswa_ujian_id ON public.nilai_siswa USING btree (ujian_id);


--
-- Name: idx_orang_tua_nama_lengkap; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_orang_tua_nama_lengkap ON public.orang_tua USING btree (nama_lengkap);


--
-- Name: idx_orang_tua_nik; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_orang_tua_nik ON public.orang_tua USING btree (nik);


--
-- Name: idx_orang_tua_phone; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_orang_tua_phone ON public.orang_tua USING btree (phone);


--
-- Name: idx_pendaftaran_siswa_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_pendaftaran_siswa_status ON public.pendaftaran_siswa USING btree (status);


--
-- Name: idx_pendaftaran_siswa_tahun_ajaran_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_pendaftaran_siswa_tahun_ajaran_id ON public.pendaftaran_siswa USING btree (tahun_ajaran_id);


--
-- Name: idx_pendaftaran_siswa_tanggal_daftar; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_pendaftaran_siswa_tanggal_daftar ON public.pendaftaran_siswa USING btree (tanggal_daftar);


--
-- Name: idx_pengeluaran_tahun_ajaran_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_pengeluaran_tahun_ajaran_id ON public.pengeluaran USING btree (tahun_ajaran_id);


--
-- Name: idx_pengeluaran_tanggal; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_pengeluaran_tanggal ON public.pengeluaran USING btree (tanggal_pengeluaran);


--
-- Name: idx_roles_name; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_roles_name ON public.roles USING btree (name);


--
-- Name: idx_ruangan_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_ruangan_nama ON public.ruangan USING btree (nama);


--
-- Name: idx_ruangan_tipe; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_ruangan_tipe ON public.ruangan USING btree (tipe_ruangan);


--
-- Name: idx_semester_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_semester_active ON public.semester USING btree (is_active);


--
-- Name: idx_semester_tahun_ajaran_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_semester_tahun_ajaran_id ON public.semester USING btree (tahun_ajaran_id);


--
-- Name: idx_siswa_beasiswa_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_beasiswa_status ON public.siswa_beasiswa USING btree (status);


--
-- Name: idx_siswa_beasiswa_tahun_ajaran_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_beasiswa_tahun_ajaran_id ON public.siswa_beasiswa USING btree (tahun_ajaran_id);


--
-- Name: idx_siswa_kelas_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_kelas_active ON public.siswa_kelas USING btree (is_active);


--
-- Name: idx_siswa_kelas_kelas_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_kelas_kelas_id ON public.siswa_kelas USING btree (kelas_id);


--
-- Name: idx_siswa_kelas_semester_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_kelas_semester_id ON public.siswa_kelas USING btree (semester_id);


--
-- Name: idx_siswa_nama_lengkap; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_nama_lengkap ON public.siswa USING btree (nama_lengkap);


--
-- Name: idx_siswa_nis; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_nis ON public.siswa USING btree (nis);


--
-- Name: idx_siswa_nisn; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_nisn ON public.siswa USING btree (nisn);


--
-- Name: idx_siswa_orang_tua_orang_tua_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_orang_tua_orang_tua_id ON public.siswa_orang_tua USING btree (orang_tua_id);


--
-- Name: idx_siswa_orang_tua_siswa_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_siswa_orang_tua_siswa_id ON public.siswa_orang_tua USING btree (siswa_id);


--
-- Name: idx_tahun_ajaran_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_tahun_ajaran_active ON public.tahun_ajaran USING btree (is_active);


--
-- Name: idx_tahun_ajaran_nama; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_tahun_ajaran_nama ON public.tahun_ajaran USING btree (nama);


--
-- Name: idx_transaksi_pembayaran_siswa_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_transaksi_pembayaran_siswa_id ON public.transaksi_pembayaran USING btree (siswa_id);


--
-- Name: idx_transaksi_pembayaran_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_transaksi_pembayaran_status ON public.transaksi_pembayaran USING btree (status);


--
-- Name: idx_transaksi_pembayaran_tanggal; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_transaksi_pembayaran_tanggal ON public.transaksi_pembayaran USING btree (tanggal_pembayaran);


--
-- Name: idx_ujian_kelas_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_ujian_kelas_id ON public.ujian USING btree (kelas_id);


--
-- Name: idx_ujian_semester_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_ujian_semester_id ON public.ujian USING btree (semester_id);


--
-- Name: idx_ujian_tanggal_ujian; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_ujian_tanggal_ujian ON public.ujian USING btree (tanggal_ujian);


--
-- Name: idx_user_roles_role_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_user_roles_role_id ON public.user_roles USING btree (role_id);


--
-- Name: idx_user_roles_user_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_user_roles_user_id ON public.user_roles USING btree (user_id);


--
-- Name: idx_users_email; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_users_email ON public.users USING btree (email);


--
-- Name: idx_users_username; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_users_username ON public.users USING btree (username);


--
-- Name: jobs_queue_index; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX jobs_queue_index ON public.jobs USING btree (queue);


--
-- Name: nilai_siswa trigger_refresh_nilai_rata_rata; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_refresh_nilai_rata_rata AFTER INSERT OR DELETE OR UPDATE ON public.nilai_siswa FOR EACH STATEMENT EXECUTE FUNCTION public.refresh_nilai_rata_rata();


--
-- Name: alamat alamat_kelurahan_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.alamat
    ADD CONSTRAINT alamat_kelurahan_id_fkey FOREIGN KEY (kelurahan_id) REFERENCES public.master_kelurahan(id) ON DELETE RESTRICT;


--
-- Name: anggaran anggaran_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anggaran
    ADD CONSTRAINT anggaran_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id) ON DELETE SET NULL;


--
-- Name: anggaran anggaran_kategori_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anggaran
    ADD CONSTRAINT anggaran_kategori_id_fkey FOREIGN KEY (kategori_id) REFERENCES public.master_anggaran_kategori(id) ON DELETE CASCADE;


--
-- Name: anggaran anggaran_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anggaran
    ADD CONSTRAINT anggaran_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: anggaran anggaran_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anggaran
    ADD CONSTRAINT anggaran_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: audit_log audit_log_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.audit_log
    ADD CONSTRAINT audit_log_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE SET NULL;


--
-- Name: auth_group_permissions auth_group_permissio_permission_id_84c5c92e_fk_auth_perm; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissio_permission_id_84c5c92e_fk_auth_perm FOREIGN KEY (permission_id) REFERENCES public.auth_permission(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_group_permissions auth_group_permissions_group_id_b120cbf9_fk_auth_group_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_group_permissions
    ADD CONSTRAINT auth_group_permissions_group_id_b120cbf9_fk_auth_group_id FOREIGN KEY (group_id) REFERENCES public.auth_group(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: auth_permission auth_permission_content_type_id_2f476e4b_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.auth_permission
    ADD CONSTRAINT auth_permission_content_type_id_2f476e4b_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: django_admin_log django_admin_log_content_type_id_c4bce8eb_fk_django_co; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_content_type_id_c4bce8eb_fk_django_co FOREIGN KEY (content_type_id) REFERENCES public.django_content_type(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: django_admin_log django_admin_log_user_id_c564eba6_fk_users_id; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.django_admin_log
    ADD CONSTRAINT django_admin_log_user_id_c564eba6_fk_users_id FOREIGN KEY (user_id) REFERENCES public.users(id) DEFERRABLE INITIALLY DEFERRED;


--
-- Name: guru guru_alamat_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guru
    ADD CONSTRAINT guru_alamat_id_fkey FOREIGN KEY (alamat_id) REFERENCES public.alamat(id) ON DELETE SET NULL;


--
-- Name: guru guru_jenis_kelamin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guru
    ADD CONSTRAINT guru_jenis_kelamin_id_fkey FOREIGN KEY (jenis_kelamin_id) REFERENCES public.master_jenis_kelamin(id) ON DELETE RESTRICT;


--
-- Name: guru guru_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.guru
    ADD CONSTRAINT guru_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- Name: hari_libur hari_libur_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hari_libur
    ADD CONSTRAINT hari_libur_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: jadwal_pelajaran jadwal_pelajaran_guru_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran
    ADD CONSTRAINT jadwal_pelajaran_guru_id_fkey FOREIGN KEY (guru_id) REFERENCES public.guru(id) ON DELETE CASCADE;


--
-- Name: jadwal_pelajaran jadwal_pelajaran_kelas_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran
    ADD CONSTRAINT jadwal_pelajaran_kelas_id_fkey FOREIGN KEY (kelas_id) REFERENCES public.kelas(id) ON DELETE CASCADE;


--
-- Name: jadwal_pelajaran jadwal_pelajaran_mata_pelajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran
    ADD CONSTRAINT jadwal_pelajaran_mata_pelajaran_id_fkey FOREIGN KEY (mata_pelajaran_id) REFERENCES public.mata_pelajaran(id) ON DELETE CASCADE;


--
-- Name: jadwal_pelajaran jadwal_pelajaran_ruangan_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran
    ADD CONSTRAINT jadwal_pelajaran_ruangan_id_fkey FOREIGN KEY (ruangan_id) REFERENCES public.ruangan(id) ON DELETE CASCADE;


--
-- Name: jadwal_pelajaran jadwal_pelajaran_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.jadwal_pelajaran
    ADD CONSTRAINT jadwal_pelajaran_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: kelas kelas_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kelas
    ADD CONSTRAINT kelas_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: kelas kelas_wali_kelas_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kelas
    ADD CONSTRAINT kelas_wali_kelas_id_fkey FOREIGN KEY (wali_kelas_id) REFERENCES public.guru(id) ON DELETE SET NULL;


--
-- Name: kepala_sekolah kepala_sekolah_guru_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.kepala_sekolah
    ADD CONSTRAINT kepala_sekolah_guru_id_fkey FOREIGN KEY (guru_id) REFERENCES public.guru(id) ON DELETE CASCADE;


--
-- Name: master_kecamatan master_kecamatan_kota_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kecamatan
    ADD CONSTRAINT master_kecamatan_kota_id_fkey FOREIGN KEY (kota_id) REFERENCES public.master_kota(id) ON DELETE CASCADE;


--
-- Name: master_kelurahan master_kelurahan_kecamatan_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kelurahan
    ADD CONSTRAINT master_kelurahan_kecamatan_id_fkey FOREIGN KEY (kecamatan_id) REFERENCES public.master_kecamatan(id) ON DELETE CASCADE;


--
-- Name: master_kota master_kota_provinsi_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.master_kota
    ADD CONSTRAINT master_kota_provinsi_id_fkey FOREIGN KEY (provinsi_id) REFERENCES public.master_provinsi(id) ON DELETE CASCADE;


--
-- Name: nilai_siswa nilai_siswa_siswa_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.nilai_siswa
    ADD CONSTRAINT nilai_siswa_siswa_id_fkey FOREIGN KEY (siswa_id) REFERENCES public.siswa(id) ON DELETE CASCADE;


--
-- Name: nilai_siswa nilai_siswa_ujian_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.nilai_siswa
    ADD CONSTRAINT nilai_siswa_ujian_id_fkey FOREIGN KEY (ujian_id) REFERENCES public.ujian(id) ON DELETE CASCADE;


--
-- Name: orang_tua orang_tua_alamat_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orang_tua
    ADD CONSTRAINT orang_tua_alamat_id_fkey FOREIGN KEY (alamat_id) REFERENCES public.alamat(id) ON DELETE SET NULL;


--
-- Name: orang_tua orang_tua_jenis_kelamin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orang_tua
    ADD CONSTRAINT orang_tua_jenis_kelamin_id_fkey FOREIGN KEY (jenis_kelamin_id) REFERENCES public.master_jenis_kelamin(id) ON DELETE RESTRICT;


--
-- Name: orang_tua orang_tua_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.orang_tua
    ADD CONSTRAINT orang_tua_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE SET NULL;


--
-- Name: pendaftaran_siswa pendaftaran_siswa_jenis_kelamin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pendaftaran_siswa
    ADD CONSTRAINT pendaftaran_siswa_jenis_kelamin_id_fkey FOREIGN KEY (jenis_kelamin_id) REFERENCES public.master_jenis_kelamin(id) ON DELETE RESTRICT;


--
-- Name: pendaftaran_siswa pendaftaran_siswa_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pendaftaran_siswa
    ADD CONSTRAINT pendaftaran_siswa_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: pendaftaran_siswa pendaftaran_siswa_siswa_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pendaftaran_siswa
    ADD CONSTRAINT pendaftaran_siswa_siswa_id_fkey FOREIGN KEY (siswa_id) REFERENCES public.siswa(id) ON DELETE SET NULL;


--
-- Name: pendaftaran_siswa pendaftaran_siswa_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pendaftaran_siswa
    ADD CONSTRAINT pendaftaran_siswa_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: pengeluaran pengeluaran_anggaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pengeluaran
    ADD CONSTRAINT pengeluaran_anggaran_id_fkey FOREIGN KEY (anggaran_id) REFERENCES public.anggaran(id) ON DELETE SET NULL;


--
-- Name: pengeluaran pengeluaran_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pengeluaran
    ADD CONSTRAINT pengeluaran_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- Name: pengeluaran pengeluaran_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pengeluaran
    ADD CONSTRAINT pengeluaran_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: pengeluaran pengeluaran_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.pengeluaran
    ADD CONSTRAINT pengeluaran_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: semester semester_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.semester
    ADD CONSTRAINT semester_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: siswa siswa_alamat_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa
    ADD CONSTRAINT siswa_alamat_id_fkey FOREIGN KEY (alamat_id) REFERENCES public.alamat(id) ON DELETE SET NULL;


--
-- Name: siswa_beasiswa siswa_beasiswa_beasiswa_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_beasiswa
    ADD CONSTRAINT siswa_beasiswa_beasiswa_id_fkey FOREIGN KEY (beasiswa_id) REFERENCES public.beasiswa(id) ON DELETE CASCADE;


--
-- Name: siswa_beasiswa siswa_beasiswa_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_beasiswa
    ADD CONSTRAINT siswa_beasiswa_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: siswa_beasiswa siswa_beasiswa_siswa_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_beasiswa
    ADD CONSTRAINT siswa_beasiswa_siswa_id_fkey FOREIGN KEY (siswa_id) REFERENCES public.siswa(id) ON DELETE CASCADE;


--
-- Name: siswa_beasiswa siswa_beasiswa_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_beasiswa
    ADD CONSTRAINT siswa_beasiswa_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: siswa siswa_jenis_kelamin_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa
    ADD CONSTRAINT siswa_jenis_kelamin_id_fkey FOREIGN KEY (jenis_kelamin_id) REFERENCES public.master_jenis_kelamin(id) ON DELETE RESTRICT;


--
-- Name: siswa_kelas siswa_kelas_kelas_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_kelas
    ADD CONSTRAINT siswa_kelas_kelas_id_fkey FOREIGN KEY (kelas_id) REFERENCES public.kelas(id) ON DELETE CASCADE;


--
-- Name: siswa_kelas siswa_kelas_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_kelas
    ADD CONSTRAINT siswa_kelas_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: siswa_kelas siswa_kelas_siswa_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_kelas
    ADD CONSTRAINT siswa_kelas_siswa_id_fkey FOREIGN KEY (siswa_id) REFERENCES public.siswa(id) ON DELETE CASCADE;


--
-- Name: siswa_orang_tua siswa_orang_tua_orang_tua_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_orang_tua
    ADD CONSTRAINT siswa_orang_tua_orang_tua_id_fkey FOREIGN KEY (orang_tua_id) REFERENCES public.orang_tua(id) ON DELETE CASCADE;


--
-- Name: siswa_orang_tua siswa_orang_tua_siswa_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa_orang_tua
    ADD CONSTRAINT siswa_orang_tua_siswa_id_fkey FOREIGN KEY (siswa_id) REFERENCES public.siswa(id) ON DELETE CASCADE;


--
-- Name: siswa siswa_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.siswa
    ADD CONSTRAINT siswa_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE SET NULL;


--
-- Name: transaksi_pembayaran transaksi_pembayaran_created_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaksi_pembayaran
    ADD CONSTRAINT transaksi_pembayaran_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.users(id) ON DELETE SET NULL;


--
-- Name: transaksi_pembayaran transaksi_pembayaran_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaksi_pembayaran
    ADD CONSTRAINT transaksi_pembayaran_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: transaksi_pembayaran transaksi_pembayaran_siswa_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaksi_pembayaran
    ADD CONSTRAINT transaksi_pembayaran_siswa_id_fkey FOREIGN KEY (siswa_id) REFERENCES public.siswa(id) ON DELETE CASCADE;


--
-- Name: transaksi_pembayaran transaksi_pembayaran_tahun_ajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.transaksi_pembayaran
    ADD CONSTRAINT transaksi_pembayaran_tahun_ajaran_id_fkey FOREIGN KEY (tahun_ajaran_id) REFERENCES public.tahun_ajaran(id) ON DELETE CASCADE;


--
-- Name: ujian ujian_guru_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_guru_id_fkey FOREIGN KEY (guru_id) REFERENCES public.guru(id) ON DELETE CASCADE;


--
-- Name: ujian ujian_jenis_ujian_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_jenis_ujian_id_fkey FOREIGN KEY (jenis_ujian_id) REFERENCES public.jenis_ujian(id) ON DELETE CASCADE;


--
-- Name: ujian ujian_kelas_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_kelas_id_fkey FOREIGN KEY (kelas_id) REFERENCES public.kelas(id) ON DELETE CASCADE;


--
-- Name: ujian ujian_mata_pelajaran_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_mata_pelajaran_id_fkey FOREIGN KEY (mata_pelajaran_id) REFERENCES public.mata_pelajaran(id) ON DELETE CASCADE;


--
-- Name: ujian ujian_ruangan_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_ruangan_id_fkey FOREIGN KEY (ruangan_id) REFERENCES public.ruangan(id) ON DELETE SET NULL;


--
-- Name: ujian ujian_semester_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.ujian
    ADD CONSTRAINT ujian_semester_id_fkey FOREIGN KEY (semester_id) REFERENCES public.semester(id) ON DELETE CASCADE;


--
-- Name: user_roles user_roles_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id) ON DELETE CASCADE;


--
-- Name: user_roles user_roles_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_roles
    ADD CONSTRAINT user_roles_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;

